---
/**
 * Home Page
 *
 * Case-study-first portfolio homepage that immediately showcases real impact and outcomes
 * rather than generic taglines. Features a hero section with featured project snapshots,
 * recent decisions, testimonials, and clear calls-to-action.
 *
 * Design Philosophy:
 * - Lead with tangible results and case studies
 * - Document decision-making process transparently
 * - Demonstrate value through real project outcomes
 * - Provide multiple entry points (projects, decisions, journey)
 *
 * Sections:
 * 1. Hero - Value statement with featured case study snapshots
 * 2. Introduction - Brief personal introduction with journey link
 * 3. Recent Decisions - Latest architectural/technical decisions
 * 4. Testimonials - Social proof from colleagues and clients
 * 5. Thinking - Problems and topics of interest
 * 6. CTA - Call-to-action for work opportunities
 *
 * Features:
 * - Featured projects showcase (top 2-3)
 * - Recent decisions preview (top 2)
 * - Testimonials integration
 * - Structured data for SEO (WebSite and Person)
 * - Responsive grid layout
 * - Multiple CTAs for different user intents
 *
 * Route: /
 *
 * @page
 */

import BaseLayout from "../layouts/BaseLayout.astro";
import SEO from "../components/SEO.astro";
import StructuredData from "../components/StructuredData.astro";
import ForwardLink from "../components/ForwardLink.astro";
import Testimonials from "../components/Testimonials.astro";
import { getCollection } from "astro:content";
import { siteConfig } from "../config";

/**
 * Queries and filters featured projects for hero section
 *
 * Retrieves all projects, filters for featured ones, sorts by custom order
 * (if specified), and limits to top 2 for the hero snapshots.
 */
const allProjects = await getCollection("projects");
const featuredProjects = allProjects
  .filter((project) => project.data.featured === true)
  .sort((a, b) => (a.data.order || 999) - (b.data.order || 999))
  .slice(0, 2);

/**
 * Case snapshots for hero display
 *
 * Takes up to 3 featured projects to showcase in the hero section,
 * providing immediate evidence of impact and outcomes.
 */
const caseSnapshots = featuredProjects.slice(0, 3);

/**
 * Queries recent decisions for preview section
 *
 * Retrieves all decisions, sorts by date (newest first), and limits to
 * top 2 for the homepage preview.
 */
const allDecisions = await getCollection("decisions");
const recentDecisions = allDecisions
  .sort(
    (a, b) => new Date(b.data.date).getTime() - new Date(a.data.date).getTime()
  )
  .slice(0, 2);
---

<BaseLayout>
  <SEO
    slot="head"
    title={`${siteConfig.author.name} - ${siteConfig.author.title}`}
    description={siteConfig.description}
    type="website"
    noSuffix
  />

  <!-- Structured Data for Homepage -->
  <StructuredData type="WebSite" />
  <StructuredData type="Person" />

  <main class="home-page">
    <!-- CASE-FIRST HERO -->
    <section class="hero">
      <div class="hero-grid">
        <!-- LEFT: Headshot + Name + Company + Button -->
        <div class="hero-left">
          <img
            src="/src/assets/images/headshot.jpg"
            alt="Shayan Jawed"
            class="hero-headshot"
          />
          <h2 class="hero-name">Shayan Jawed</h2>
          <p class="hero-company">Applied Scientist @ Amazon</p>
          <div class="hero-socials">
            <a href="https://github.com/..." aria-label="Email">Email</a>
            <a href="https://scholar.google.com/..." aria-label="Google Scholar"
              >Scholar</a
            >
            <a href="https://linkedin.com/in/..." aria-label="LinkedIn"
              >LinkedIn</a
            >
          </div>
        </div>

        <!-- RIGHT: Summary / Bio -->
        <div class="hero-right">
          <p class="hero-summary-text">
            I'm a Berlin-based Applied Scientist currently working at Amazon. I
            hold a PhD in Machine Learning at the University of Hildesheim under
            the supervision of Prof. Lars Schmidt-Thieme. My work spans applied
            research and production systems, with a focus on time-series
            forecasting, recommender systems, and large-scale decision models.
            I’ve published peer-reviewed research at venues such as ECML, PAKDD,
            BigData, and RecSys, and have led industry projects in pricing,
            recommendations, and forecasting using modern ML architectures on
            AWS.
          </p>
          <div class="hero-cta">
            <a href="/contact" class="btn-primary hero-contact-btn">
              Get in Touch →
            </a>
          </div>
        </div>
      </div>
    </section>

    <style>
      /* ----------------------
   GLOBAL PAGE STYLING
----------------------- */
      .home-page {
        max-width: 1100px;
        margin: 0 auto;
        padding: 0 1.5rem 4rem;
      }

      /* ----------------------
   HERO SECTION
----------------------- */
      .hero {
        padding: 3rem 0 5rem;
        border-bottom: 1px solid var(--color-border);
        margin-bottom: 4rem;
      }

      /* Grid layout for hero: LEFT = headshot/name/button, RIGHT = bio */
      .hero-grid {
        display: grid;
        grid-template-columns: 30% 70%;
        gap: 4rem;
        align-items: center;
      }

      /* --------- LEFT: Headshot + Name + Company + Button --------- */
      .hero-left {
        text-align: center;
        align-self: self-start;
      }

      .hero-headshot {
        width: 250px;
        border-radius: 50%;
        object-fit: cover;
        margin: 0 auto 1rem;
      }

      .hero-name {
        font-size: 2rem;
        font-weight: 600;
        margin-bottom: 0.1rem;
      }

      .hero-company {
        font-size: 1rem;
        color: var(--color-text-muted);
        margin-bottom: 1.5rem;
      }
      .hero-cta {
        display: flex;
        justify-content: flex-end;
      }
      .hero-contact-btn {
        display: inline-block;
        padding: 0.75rem 1.5rem;
        background: var(--color-text);
        color: var(--color-bg);
        font-weight: 600;
        font-size: 0.9375rem;
        text-decoration: none;
        border-radius: 6px;
        transition: opacity 0.2s ease;
      }

      .hero-contact-btn:hover {
        opacity: 0.85;
      }

      /* --------- RIGHT: Summary / Bio --------- */
      .hero-right {
        font-size: 1.125rem;
        line-height: 1.6;
        padding-right: 3rem;
        color: var(--color-text-secondary);
      }

      .hero-summary-text {
        margin-bottom: 1rem;
      }

      /* ----------------------
   INTRODUCTION SECTION
----------------------- */
      .introduction {
        max-width: 600px;
        margin-bottom: 5rem;
        font-size: 1.125rem;
        line-height: 1.7;
        color: var(--color-text-secondary);
      }

      .introduction p {
        margin-bottom: 1rem;
      }

      .introduction p:first-child {
        color: var(--color-text);
      }

      /* ----------------------
   RECENT DECISIONS SECTION
----------------------- */
      .recent-decisions {
        margin-bottom: 5rem;
      }

      .section-header {
        display: flex;
        align-items: baseline;
        justify-content: space-between;
        margin-bottom: 2rem;
      }

      .section-header h2 {
        font-size: 1.25rem;
        font-weight: 600;
        letter-spacing: -0.01em;
      }

      .decisions-list {
        display: flex;
        flex-direction: column;
        gap: 0;
        border-top: 1px solid var(--color-border);
      }

      .decision-item {
        padding: 1.5rem 0;
        border-bottom: 1px solid var(--color-border);
      }

      .decision-item:last-child {
        border-bottom: none;
      }

      .decision-date {
        display: block;
        font-size: 0.75rem;
        font-weight: 500;
        text-transform: uppercase;
        letter-spacing: 0.05em;
        color: var(--color-text-muted);
        margin-bottom: 0.5rem;
      }

      .decision-title {
        font-size: 1.125rem;
        font-weight: 600;
        line-height: 1.3;
        color: var(--color-text);
        margin-bottom: 0.5rem;
      }

      .decision-context {
        font-size: 0.9375rem;
        line-height: 1.6;
        color: var(--color-text-secondary);
      }

      .no-decisions {
        color: var(--color-text-muted);
        font-style: italic;
        padding: 1.5rem 0;
      }

      /* ----------------------
   THINKING SECTION
----------------------- */
      .thinking {
        margin-bottom: 5rem;
      }

      .thinking h2 {
        font-size: 1.25rem;
        font-weight: 600;
        margin-bottom: 1.25rem;
        letter-spacing: -0.01em;
      }

      .thinking-list {
        font-size: 1.0625rem;
        line-height: 1.9;
        color: var(--color-text-secondary);
        max-width: 680px;
      }

      /* ----------------------
   CTA SECTION
----------------------- */
      .cta {
        padding: 3rem 0;
        border-top: 1px solid var(--color-border);
      }

      .cta h2 {
        font-size: 1.5rem;
        font-weight: 600;
        margin-bottom: 0.75rem;
        letter-spacing: -0.01em;
      }

      .cta p {
        font-size: 1rem;
        color: var(--color-text-secondary);
        margin-bottom: 1.5rem;
        max-width: 500px;
        line-height: 1.6;
      }

      .cta-buttons {
        display: flex;
        gap: 1rem;
      }

      .cta-buttons .btn-primary,
      .cta-buttons .btn-secondary {
        text-align: center;
        width: auto;
      }

      /* ----------------------
   RESPONSIVE
----------------------- */
      @media (max-width: 768px) {
        .hero-grid {
          grid-template-columns: 1fr;
          text-align: center;
        }

        .hero-left,
        .hero-right {
          margin-bottom: 2rem;
        }

        .introduction {
          font-size: 1rem;
        }

        .section-header {
          flex-direction: column;
          align-items: flex-start;
          gap: 0.5rem;
        }

        .decision-title {
          font-size: 1rem;
        }

        .cta-buttons {
          flex-direction: column;
        }

        .cta-buttons .btn-primary,
        .cta-buttons .btn-secondary {
          width: 100%;
        }
      }
    </style>
  </main>
</BaseLayout>
